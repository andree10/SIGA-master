

  <!-- WIZARD -->
  <div class="nav-wizards-container mb-3">
    <nav class="nav nav-wizards-1">
      <div class="nav-item col">
        <a class="nav-link"
           [ngClass]="{ 'active': currentStep === 1, 'completed': currentStep > 1 }"
           (click)="goToStep(1)">
          <div class="nav-no">1</div>
          <div class="nav-text">Empresa</div>
        </a>
      </div>
      <div class="nav-item col">
        <a class="nav-link"
           [ngClass]="{ 'active': currentStep === 2 }"
           (click)="goToStep(2)">
          <div class="nav-no">2</div>
          <div class="nav-text">Sucursales</div>
        </a>
      </div>
    </nav>
  </div>

<form [formGroup]="empresaForm">
  <!-- PASO 1: Empresa -->
  <div *ngIf="currentStep === 1" class="card empresa-card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5>Datos de Empresa</h5>
      <button class="btn btn-circle" [ngClass]="botonGuardar ? 'btn-primary' : 'btn-success'" (click)="accionBotonEmpresa()">
        <i class="bi" [ngClass]="botonGuardar ? 'bi-save' : 'bi-check-lg'"></i>
        {{ botonGuardar ? 'Guardar' : 'Actualizar' }}
      </button>
    </div>
    <div class="card-body">
      <div class="row mb-3">
        <div class="col-md-6">
          <label>Usuario SARAH</label>
          <input class="form-control" formControlName="usuarioSarah">
        </div>
        <div class="col-md-6">
          <label>Clave SARAH</label>
          <input type="password" class="form-control" formControlName="claveSarah">
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-6">
          <label>RTN</label>
          <input class="form-control" formControlName="rtn">
        </div>
        <div class="col-md-6">
          <label>Nombre</label>
          <input class="form-control" formControlName="nombre">
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-6">
          <label>Dirección</label>
          <input class="form-control" formControlName="direccion">
        </div>
        <div class="col-md-6">
          <label>Representante Legal</label>
          <input class="form-control" formControlName="representanteLegal">
        </div>
      </div>
    </div>
  </div>
</form>

<form [formGroup]="sucursalForm">
  <!-- PASO 2: Sucursal + Líneas -->
  <div *ngIf="currentStep === 2">
    <!-- Card Sucursal -->
    <div class="card empresa-card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5>Sucursal</h5>
        <button class="btn btn-circle btn-primary" (click)="accionBotonSucursal()">
          <i class="bi bi-save"></i> Guardar
        </button>
      </div>
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-md-4">
            <label>ID Sucursal</label>
            <input class="form-control" formControlName="idsucursal">
          </div>
          <div class="col-md-4">
            <label>Nombre de la Sucursal</label>
            <input class="form-control" formControlName="sucursal">
          </div>
          <div class="col-md-4">
            <label>Dirección</label>
            <input class="form-control" formControlName="direccionSucursal">
          </div>
        </div>
      </div>


    <div class="card-body">
        <table class="table table-striped table-bordered align-middle text-nowrap">
  <thead>
    <tr>
      <th>#</th>
      <th>Nombre Sucursal</th>
      <th>Dirección</th>
      <th colspan="3" class="text-center">Opciones</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let linea of lineas.controls; let i = index">
      <td>{{ linea.value.numeroLinea }}</td>
      <td>{{ linea.value.cantidadUnidades }}</td>
      <td>{{ linea.value.pesoAfectado }}</td>

      <td class="text-center">
        <button class="btn btn-success btn-sm" (click)="guardarLinea(i)">Guardar</button>
      </td>
      <td class="text-center">
        <button class="btn btn-warning btn-sm" (click)="editarLinea(i)">Editar</button>
      </td>
      <td class="text-center">
        <button class="btn btn-danger btn-sm" (click)="borrarLinea(i)">Borrar</button>
      </td>
    </tr>
  </tbody>
</table>

      </div>


    </div>

    
     
    
  </div>

</form>
<!-- Mostrar datos crudos -->
<pre>{{ empresaForm.value | json }}</pre>
<pre>{{ sucursalForm.value | json }}</pre>
<pre>{{ lineas.value | json }}</pre>